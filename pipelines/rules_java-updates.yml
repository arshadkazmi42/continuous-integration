---
steps:
  - input: "Artifacts information"
    fields:
      - text: "Artifacts output"
        key: "artifacts"
        required: true
        hint: |
          Output from create_java_tools_release.sh. E.g.:
          
          release_candidates/java/v11.9/java_tools_linux-v11.9-rc1.zip 512582cac5b7ea7974a77b0da4581b21f546c9478f206eedf54687eeac035989
          release_candidates/java/v11.9/java_tools_windows-v11.9-rc1.zip 677ab910046205020fd715489147c2bcfad8a35d9f5d94fdc998d217545bd87a
          release_candidates/java/v11.9/java_tools_darwin_x86_64-v11.9-rc1.zip b9e962c6a836ba1d7573f2473fab3a897c6370d4c2724bde4017b40932ff4fe4
          release_candidates/java/v11.9/java_tools_darwin_arm64-v11.9-rc1.zip 3a897c6370d4c2724bde4017b40932ff4fe4b9e962c6a836ba1d7573f2473fab
          release_candidates/java/v11.9/java_tools-v11.9-rc1.zip 5cd59ea6bf938a1efc1e11ea562d37b39c82f76781211b7cd941a2346ea8484d
          
  - wait 
      
  - label: "Set up"
    agents:
      - "queue=default"
    command: |
      echo "+++ Checking out Git branch"    
      git fetch origin master
      git checkout master

      echo "+++ Identify required variable"
      artifacts=$(buildkite-agent meta-data get "artifacts") 
      echo "artifacts = \"\$artifacts\""          
      
      echo "+++ Check if RC"
      if [[ \"\$artifacts\" =~ "-rc" ]]; then
        echo "RC"
      else
        echo "Not RC"
      # if rc: 
      # create a new branch

      # echo "+++ Update repositories.bzl"
      # edit java_tools_repos()
