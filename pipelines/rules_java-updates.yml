---
steps:
  - input: "Artifacts information"
    fields:
      - text: "Artifacts output"
        key: "artifacts"
        required: true
        hint: Output from create_java_tools_release.sh
           
  - wait 
      
  - label: "Update rules_java" 
    agents:
      - "queue=default"
    command: |
      echo "+++ Checking out Git branch"    
      git fetch origin master
      git checkout master

      echo "+++ Identify required variable"
      artifacts=$(buildkite-agent meta-data get "artifacts") 
      echo "artifacts = \"\$artifacts\""          
      
      echo "+++ Check if RC"
      if [[ \"\$artifacts\" =~ .*-rc.* ]]; then
        echo "RC"
      else
        echo "Not RC"
      fi
      # if rc: 
      # create a new branch

      # echo "+++ Update repositories.bzl"
      # edit java_tools_repos()
